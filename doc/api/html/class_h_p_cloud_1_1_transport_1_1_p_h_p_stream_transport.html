<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>HPCloud-PHP: PHPStreamTransport Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HPCloud-PHP
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
   <div id="projectbrief">PHP bindings for HPCloud and OpenStack services.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PHPStreamTransport Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provide HTTP transport with the PHP HTTP stream wrapper.  
 <a href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for PHPStreamTransport:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.png" usemap="#PHPStreamTransport_map" alt=""/>
  <map id="PHPStreamTransport_map" name="PHPStreamTransport_map">
<area href="interface_h_p_cloud_1_1_transport_1_1_transporter.html" title="Describes a Transporter." alt="Transporter" shape="rect" coords="0,0,130,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8c602b141c5f9bef86a982a1826a9140"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#a8c602b141c5f9bef86a982a1826a9140">doRequest</a> ($uri, $method= 'GET', $headers=array(), $body= '')</td></tr>
<tr class="memdesc:a8c602b141c5f9bef86a982a1826a9140"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a request.  <a href="#a8c602b141c5f9bef86a982a1826a9140"></a><br/></td></tr>
<tr class="memitem:a959e766c0228e247c0f5ab687e2d98e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#a959e766c0228e247c0f5ab687e2d98e2">doRequestWithResource</a> ($uri, $method, $headers, $resource)</td></tr>
<tr class="memdesc:a959e766c0228e247c0f5ab687e2d98e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements Transporter::doRequestWithResource().  <a href="#a959e766c0228e247c0f5ab687e2d98e2"></a><br/></td></tr>
<tr class="memitem:a629fe8be65fb8cba282ac4901ac12877"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#a629fe8be65fb8cba282ac4901ac12877">onNotification</a> (callable $callable)</td></tr>
<tr class="memdesc:a629fe8be65fb8cba282ac4901ac12877"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an event handler for notifications.  <a href="#a629fe8be65fb8cba282ac4901ac12877"></a><br/></td></tr>
<tr class="memitem:ac9d8e03fb35622f4f4d3391219ac403f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#ac9d8e03fb35622f4f4d3391219ac403f">printNotifications</a> ($code, $severity, $msg, $msgcode, $bytes, $len)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae6324ee82189c6077b985b6b77327738"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#ae6324ee82189c6077b985b6b77327738">HTTP_USER_AGENT_SUFFIX</a> = ' (b2d770) PHP/1.0'</td></tr>
<tr class="memitem:a7df806cd51183ba2792a75445ce31724"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#a7df806cd51183ba2792a75445ce31724">$httpVersion</a> = '1.1'</td></tr>
<tr class="memdesc:a7df806cd51183ba2792a75445ce31724"><td class="mdescLeft">&#160;</td><td class="mdescRight">The HTTP version this should use.  <a href="#a7df806cd51183ba2792a75445ce31724"></a><br/></td></tr>
<tr class="inherit_header pub_attribs_interface_h_p_cloud_1_1_transport_1_1_transporter"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_interface_h_p_cloud_1_1_transport_1_1_transporter')"><img src="closed.png" alt="-"/>&nbsp;Public Attributes inherited from <a class="el" href="interface_h_p_cloud_1_1_transport_1_1_transporter.html">Transporter</a></td></tr>
<tr class="memitem:a0a0a7e580efe549e01780677170720ac inherit pub_attribs_interface_h_p_cloud_1_1_transport_1_1_transporter"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_h_p_cloud_1_1_transport_1_1_transporter.html#a0a0a7e580efe549e01780677170720ac">HTTP_USER_AGENT</a> = 'HPCloud-PHP/1.0'</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a734dffadfbfad120083fbb044f3685e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#a734dffadfbfad120083fbb044f3685e8">guessError</a> ($err, $uri, $method)</td></tr>
<tr class="memdesc:a734dffadfbfad120083fbb044f3685e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an error, this tries to guess the cause and throw an exception.  <a href="#a734dffadfbfad120083fbb044f3685e8"></a><br/></td></tr>
<tr class="memitem:a918acb5b71f12e37775c307124451d67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#a918acb5b71f12e37775c307124451d67">smashHeaders</a> ($headers)</td></tr>
<tr class="memdesc:a918acb5b71f12e37775c307124451d67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an array of headers, build a header string.  <a href="#a918acb5b71f12e37775c307124451d67"></a><br/></td></tr>
<tr class="memitem:adf6a6e6ae981a7c3e11a0f38b193350d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#adf6a6e6ae981a7c3e11a0f38b193350d">buildStreamContext</a> ($method, $headers, $body)</td></tr>
<tr class="memdesc:adf6a6e6ae981a7c3e11a0f38b193350d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build the stream context for a request.  <a href="#adf6a6e6ae981a7c3e11a0f38b193350d"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:acda6b955c3636f9ecec8ca7e77c2d5a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html#acda6b955c3636f9ecec8ca7e77c2d5a4">$notificationCallback</a> = NULL</td></tr>
<tr class="memdesc:acda6b955c3636f9ecec8ca7e77c2d5a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The event watcher callback.  <a href="#acda6b955c3636f9ecec8ca7e77c2d5a4"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Provide HTTP transport with the PHP HTTP stream wrapper. </p>
<p>PHP comes with a stream wrapper for HTTP. Actually, it comes with two such stream wrappers, and the compile-time options determine which is used. This transporter uses the stream wrapper library to send requests to the remote host.</p>
<p>Several properties are declared public, and can be changed to suite your needs.</p>
<p>You can use a single <a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html" title="Provide HTTP transport with the PHP HTTP stream wrapper.">PHPStreamTransport</a> object to execute multiple requests.</p>
<dl class="section attention"><dt>Attention</dt><dd>This class should not be constructed directly. Use <a class="el" href="class_h_p_cloud_1_1_transport.html#a0deb004950b8dc4f51836316fd19c111" title="Get an instance of a Transporter.">HPCloud::Transport::instance()</a> to get an instance.</dd></dl>
<p>See <a class="el" href="class_h_p_cloud_1_1_transport.html" title="Provide an HTTP client (Transporter) for interaction with HPCloud.">HPCloud::Transport</a> and <a class="el" href="class_h_p_cloud_1_1_bootstrap.html" title="Bootstrapping services.">HPCloud::Bootstrap</a>. </p>

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00047">47</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>
</div><h2>Member Function Documentation</h2>
<a class="anchor" id="adf6a6e6ae981a7c3e11a0f38b193350d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">buildStreamContext </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build the stream context for a request. </p>
<p>All of the HTTP transport data is passed into PHP's stream wrapper via a stream context. This builds the context. </p>

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00235">235</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

<p>References <a class="el" href="_bootstrap_8php_source.html#l00304">Bootstrap\config()</a>, <a class="el" href="_bootstrap_8php_source.html#l00337">Bootstrap\hasConfig()</a>, and <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00213">PHPStreamTransport\smashHeaders()</a>.</p>

<p>Referenced by <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00067">PHPStreamTransport\doRequest()</a>, and <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00120">PHPStreamTransport\doRequestWithResource()</a>.</p>

</div>
</div>
<a class="anchor" id="a8c602b141c5f9bef86a982a1826a9140"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">doRequest </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$method</em> = <code>'GET'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$headers</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$body</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a request. </p>
<p>Invoking this method causes a single request to be relayed over the transporter. The transporter MUST be capable of handling multiple invocations of a doRequest() call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$uri</td><td>The target URI. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$method</td><td>The method to be sent. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$headers</td><td>An array of name/value header pairs. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$body</td><td>The string containing the request body. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interface_h_p_cloud_1_1_transport_1_1_transporter.html#a8c602b141c5f9bef86a982a1826a9140">Transporter</a>.</p>

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00067">67</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

<p>References <a class="el" href="streams-tutorial-example_8php_source.html#l00031">$cxt</a>, <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00235">PHPStreamTransport\buildStreamContext()</a>, <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00173">PHPStreamTransport\guessError()</a>, <a class="el" href="_bootstrap_8php_source.html#l00337">Bootstrap\hasConfig()</a>, and <a class="el" href="streams-tutorial-example_8php_source.html#l00029">PHP_EOL</a>.</p>

</div>
</div>
<a class="anchor" id="a959e766c0228e247c0f5ab687e2d98e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">doRequestWithResource </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$resource</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implements Transporter::doRequestWithResource(). </p>
<p>Unfortunately, PHP Stream Wrappers do not allow HTTP data to be read out of a file resource, so using this method will allow some performance improvement (because grabage collection can collect faster), but not a lot.</p>
<p>While PHP's underlying architecture should still adequately buffer large strings, the effects of this buffering on really large data (5G or so) is unknown. </p>

<p>Implements <a class="el" href="interface_h_p_cloud_1_1_transport_1_1_transporter.html#a959e766c0228e247c0f5ab687e2d98e2">Transporter</a>.</p>

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00120">120</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

<p>References <a class="el" href="streams-tutorial-example_8php_source.html#l00031">$cxt</a>, <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00235">PHPStreamTransport\buildStreamContext()</a>, and <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00173">PHPStreamTransport\guessError()</a>.</p>

</div>
</div>
<a class="anchor" id="a734dffadfbfad120083fbb044f3685e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">guessError </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given an error, this tries to guess the cause and throw an exception. </p>
<p>Stream wrappers do not deal with error conditions gracefully. (For starters, during an error one cannot access the HTTP headers). The only useful piece of data given is the contents of the last error buffer.</p>
<p>This uses the contents of that buffer to attempt to learn what happened during the request. It then throws an exception that seems appropriate for the given context. </p>

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00173">173</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

<p>Referenced by <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00067">PHPStreamTransport\doRequest()</a>, and <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00120">PHPStreamTransport\doRequestWithResource()</a>.</p>

</div>
</div>
<a class="anchor" id="a629fe8be65fb8cba282ac4901ac12877"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">onNotification </td>
          <td>(</td>
          <td class="paramtype">callable&#160;</td>
          <td class="paramname"><em>$callable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an event handler for notifications. </p>
<p>During the course of a transaction, the stream wrapper emits a variety of notifications. This function can be used to register an event handler to listen for notifications.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">callable</td><td class="paramname">$callable</td><td>Any callable, including an anonymous function or closure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a href="http://us3.php.net/manual/en/function.stream-notification-callback.php">http://us3.php.net/manual/en/function.stream-notification-callback.php</a> </dd></dl>

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00197">197</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

</div>
</div>
<a class="anchor" id="ac9d8e03fb35622f4f4d3391219ac403f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">printNotifications </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$severity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$msgcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00270">270</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

<p>References <a class="el" href="streams-tutorial-example_8php_source.html#l00029">PHP_EOL</a>.</p>

</div>
</div>
<a class="anchor" id="a918acb5b71f12e37775c307124451d67"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smashHeaders </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given an array of headers, build a header string. </p>
<p>This builds an HTTP header string in the form required by the HTTP stream wrapper for PHP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$headers</td><td>An associative array of header names to header values. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string A string containing formatted headers. </dd></dl>

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00213">213</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

<p>References <a class="el" href="oo-tutorial-code_8php_source.html#l00028">$name</a>.</p>

<p>Referenced by <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00235">PHPStreamTransport\buildStreamContext()</a>.</p>

</div>
</div>
<h2>Member Data Documentation</h2>
<a class="anchor" id="a7df806cd51183ba2792a75445ce31724"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$httpVersion = '1.1'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The HTTP version this should use. </p>
<p>By default, this is set to 1.1, which is not PHP's default. We do this to take advantage of chunked encoding. While this requires PHP 5.3.0 or greater, this is not viewed as a problem, given that the entire library requires PHP 5.3. </p>

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00059">59</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

</div>
</div>
<a class="anchor" id="acda6b955c3636f9ecec8ca7e77c2d5a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">$notificationCallback = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The event watcher callback. </p>

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00065">65</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae6324ee82189c6077b985b6b77327738"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const HTTP_USER_AGENT_SUFFIX = ' (b2d770) PHP/1.0'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_p_h_p_stream_transport_8php_source.html#l00049">49</a> of file <a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/HPCloud/Transport/<a class="el" href="_p_h_p_stream_transport_8php_source.html">PHPStreamTransport.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_h_p_cloud.html">HPCloud</a></li><li class="navelem"><a class="el" href="namespace_h_p_cloud_1_1_transport.html">Transport</a></li><li class="navelem"><a class="el" href="class_h_p_cloud_1_1_transport_1_1_p_h_p_stream_transport.html">PHPStreamTransport</a></li>
    <li class="footer">Generated on Fri Jan 11 2013 09:17:48 for HPCloud-PHP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
